name: "Setup cabal-docspec"
description: "Setup cabal-docspec"
runs:
  using: composite
  steps:
    - name: ðŸ› ï¸ Install cabal-docspec (Linux)
      if: ${{ runner.os == 'Linux' }}
      run: |
        mkdir -p "${{ github.workspace }}/.cabal-docspec/bin"
        curl -sL https://github.com/phadej/cabal-extras/releases/download/cabal-docspec-0.0.0.20250606/cabal-docspec-0.0.0.20250606-x86_64-linux.xz > "${{ runner.temp }}/cabal-docspec.xz"
        echo 'cc20bb5c19501b42bde77556bc419c7c0a5c8d1eb65663024d8a4e4c868bef25  ${{ runner.temp }}/cabal-docspec.xz' | sha256sum -c -
        xz -d < "${{ runner.temp }}/cabal-docspec.xz" > "${{ github.workspace }}/.cabal-docspec/bin/cabal-docspec"
        chmod a+x "${{ github.workspace }}/.cabal-docspec/bin/cabal-docspec"
      shell: sh

    - name: ðŸ› ï¸ Add cabal-docspec to PATH
      run: echo "${{ github.workspace }}/.cabal-docspec/bin" >> "$GITHUB_PATH"
      shell: sh
